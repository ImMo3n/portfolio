(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();let l;const S=365*24*60*60*1e3;document.addEventListener("DOMContentLoaded",()=>{k(document.documentElement.lang),X(),j(),U(),G(),z(),O(),_(document.documentElement.lang),R(),Z()});function X(){const e=F(),t=e?e==="dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;f(t),document.documentElement.addEventListener("transitionend",()=>{document.documentElement.classList.add("color__transition")},{once:!0}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n=>{f(n.matches)})}function F(){return localStorage.getItem("colorScheme")}function I(e){localStorage.setItem("colorScheme",e)}function f(e){e?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark")):e||(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light")),I(e?"dark":"light")}function k(e){document.fonts.onloadingdone=()=>{D(document.documentElement.lang),x()}}function _(e){for(const t of document.querySelectorAll(".career__timeline"))P(t,e)}function P(e,t){const n=e.closest(".career__section").querySelector(t==="en"?".career__info__english":".career__info__farsi"),o=e.querySelector(".timeline__end"),a=e.querySelector(".timeline__begin"),r=parseFloat(window.getComputedStyle(n).height),i=e.firstElementChild;i.classList.contains("career__timeline__line__animate")||a.addEventListener("transitionend",()=>{i.classList.add("career__timeline__line__animate")},{once:!0}),i.style.height=`${r}px`,a.style.transform=`translateY(${r-o.clientHeight-a.clientHeight}px)`}function O(){document.querySelectorAll("img").forEach(e=>{e.complete?e.closest("div")?.classList.remove("loading"):e.onload=()=>{e.closest("div")?.classList.remove("loading")}})}function z(){const e=Array.from(document.querySelectorAll("[data-svg-url]")).reduce((t,n)=>{const o=n.dataset.svgUrl;if(o===void 0)throw console.error(`element: ${n}`),new Error("Url of the element not found");return t[o]===void 0?t[o]=[n]:t[o].push(n),t},{});for(const t in e)W(t).then(n=>{e[t].forEach(o=>{o.append(n.cloneNode(!0)),o.classList.remove("loading")})})}async function W(e){const n=await(await fetch(e)).blob(),o=new FileReader;return new Promise(a=>{o.onload=()=>{const i=o.result.split(",")[1],c=atob(i),m=new DOMParser().parseFromString(c,"image/svg+xml").documentElement;a(m)},o.readAsDataURL(n)})}function R(){window.addEventListener("resize",()=>{l?clearTimeout(l):V(),D(document.documentElement.lang),l=setTimeout(()=>{x(),l=void 0},300)})}function U(){const e=document.querySelector("#languageCheckbox"),t=document.querySelector("#lightModeCheckbox");e.addEventListener("change",n=>{const o=n.target.checked;L(o?"en":"fa"),u()}),t.addEventListener("change",n=>{const o=!n.target.checked;f(o),u()}),e.checked=document.documentElement.lang==="en",e.ariaLabel="Language toggle",t.checked=document.documentElement.classList.contains("light"),t.ariaLabel="Color scheme toggle",u()}function u(){const e=document.querySelector("#languageCheckbox"),t=document.querySelector("#lightModeCheckbox");e.ariaPressed=document.documentElement.lang==="en"?"English":"Persian",t.ariaPressed=document.documentElement.classList.contains("light")?"Light mode":"Dark mode"}function j(){const e=B();e&&(document.documentElement.lang=e);const t=document.documentElement.lang;E(t),v(t),q(t)}function B(){return localStorage.getItem("language")}function N(e){localStorage.setItem("language",e)}function L(e){Y(e),E(e),v(e),q(e),Q(e),J(e),ee(e),_(e),N(e)}function J(e){for(const t of document.querySelectorAll(".career__timeline[data-hover-info]")){const{startDate:n,endDate:o}=t.closest(".career__section").dataset,a=new Date(n),i=((new Date(o).getTime()-a.getTime())/S).toFixed(1),[c,s]=(e==="en"?i:b(i)).split(".");t.dataset.hoverInfo=e==="en"?` ${c} ${c==="1"?"year":"years"} and ${s} ${s==="1"?"month":"months"}`:`${c} سال و ${s} ماه`}}function Y(e){const t=document.querySelector("#info-farsi"),n=document.querySelector("#info-english"),o=document.querySelector("main");e==="en"?(t.style.transform="translateX(100%)",t.style.opacity=0,o.style.transform=`translateX(${t.offsetWidth}px)`,n.style.transform="translateX(100%)",n.style.opacity=1):e==="fa"&&(t.style.transform="translateX(0)",t.style.opacity=1,o.style.transform="translateX(0)",n.style.transform="translateX(0)",n.style.opacity=0),document.documentElement.lang=e}function E(e){for(const t of document.querySelectorAll(".career__section")){const n=t.querySelector(".career__info__farsi"),o=t.querySelector(".career__info__english"),a=t.querySelector(".career__timeline");o.style.width=n.offsetWidth+"px",e==="en"?(n.style.transform=`translateX(${n.offsetWidth}px)`,n.style.opacity=0,o.style.opacity=1,a.style.transform=`translateX(${n.offsetWidth}px)`,o.style.transform=`translateX(${o.offsetWidth+16}px)`):e==="fa"&&(n.style.transform="translateX(0)",n.style.opacity=1,o.style.opacity=0,a.style.transform="translateX(0)",o.style.transform="translateX(0)")}}function p(e){const t=document.querySelector("main"),n=t.querySelector(e==="en"?".main__header__english":".main__header__persian"),o=window.getComputedStyle(n),a=n.offsetHeight+parseFloat(o.marginTop),r=parseFloat(o.marginBottom),i=t.querySelector(".career__section"),c=window.getComputedStyle(i),s=Math.max(r,parseFloat(c.marginTop)),d=Array.from(document.querySelectorAll(".career__section")),m=d.reduce((A,C,M)=>{const g=C.querySelector(e==="en"?".career__info__english":".career__info__farsi"),T=window.getComputedStyle(g),H=g.offsetHeight,h=d.at(M+1);let y=0;if(h!==void 0){const $=window.getComputedStyle(h);y=Math.max(parseFloat(T.marginBottom),parseFloat($.marginTop))}return A+H+y},0);return a+s+m+40}function G(){for(const e of document.querySelectorAll("[data-start-date]")){const{englishEndDate:t,englishStartDate:n,persianEndDate:o,persianStartDate:a}=w(e.dataset);for(const r of e.querySelectorAll("[data-start-date-persian]"))r.append(a);for(const r of e.querySelectorAll("[data-end-date-persian]"))r.append(o);for(const r of e.querySelectorAll("[data-start-date-english]"))r.append(n);for(const r of e.querySelectorAll("[data-end-date-english]"))r.append(t)}}function q(e){for(const t of document.querySelectorAll("[data-start-date]")){const{startDate:n,endDate:o}=t.dataset,{englishEndDate:a,englishStartDate:r,persianEndDate:i,persianStartDate:c}=w(t.dataset);for(const s of t.querySelectorAll("[data-start-date-timeline]"))s.innerText=e==="en"?r:c;for(const s of t.querySelectorAll("[data-end-date-timeline]"))s.innerText=e==="en"?a:i}}function w(e){const{startDate:t,endDate:n}=e,o=new Date(t).toLocaleDateString("fa-IR",{year:"numeric",month:"long"}).split(" ").reverse().join(" "),a=new Date(n).toLocaleDateString("fa-IR",{year:"numeric",month:"long"}).split(" ").reverse().join(" "),r=new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long"}),i=new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long"});return{englishStartDate:r,englishEndDate:i,persianStartDate:o,persianEndDate:a}}function v(e){const t=document.querySelector(".main__header__english"),n=document.querySelector(".main__header__persian"),o=n.firstElementChild.offsetWidth;e==="en"?(t.style.transform="translateX(16px)",n.style.transform=`translateX(${o+16}px)`,t.style.opacity=1,n.style.opacity=0):(t.style.transform=`translateX(-${t.offsetWidth}px)`,n.style.transform="translateX(0)",t.style.opacity=0,n.style.opacity=1)}function x(){document.querySelector(".main__wrapper").classList.add("main__wrapper__transition");for(const e of document.querySelectorAll(".personal__wrapper"))e.classList.add("personal__wrapper__transition");for(const e of document.querySelectorAll(".career__section")){const t=e.querySelector(".career__info__farsi"),n=e.querySelector(".career__info__english");t.classList.add("career__info__transition"),n.classList.add("career__info__transition")}for(const e of document.querySelectorAll(".main__header__persian, .main__header__english"))e.classList.add("main__header__transition");for(const e of document.querySelectorAll(".career__timeline"))e.classList.add("timeline__language__transition");for(const e of document.querySelectorAll(".timeline__begin"))e.classList.add("timeline__begin__animation");for(const e of document.querySelectorAll(".page__controls"))e.classList.add("page__control__transition")}function V(){for(const e of document.querySelectorAll(".personal__wrapper__transition, .career__info__transition, .main__header__transition, .main__wrapper__transition, .timeline__language__transition, .timeline__begin__animation, .page__control__transition"))e.classList.remove("personal__wrapper__transition","career__info__transition","main__header__transition","main__wrapper__transition","timeline__language__transition","timeline__begin__animation","page__control__transition")}function D(e){const t=document.querySelector("#info-farsi"),n=document.querySelector("#info-english");n.style.width=`${t.offsetWidth}px`,n.style.left=`-${t.offsetWidth}px`,_(document.documentElement.lang);const o=K(),a=document.querySelector("main");a.style.minHeight=o+"px",L(e)}function K(){const e=p("en"),t=p("fa");return Math.max(e,t)}function Q(e){e==="fa"?document.title="محسن افشاری":document.title="Mohsen Afshari"}function Z(){const e=document.querySelector(".page__item__info");e.hidden=!0,document.addEventListener("mousemove",t=>{t.clientX,t.clientY,e.style.top=t.clientY+20+"px",e.style.left=t.clientX+10+"px"});for(const t of document.querySelectorAll("[data-hover-info]"))t.addEventListener("mouseenter",n=>{const o=t.dataset.hoverInfo;e.hidden=!1,e.innerText=o}),t.addEventListener("mouseleave",n=>{e.hidden=!0})}function ee(e){for(const t of document.querySelectorAll("[data-birthday]")){const n=new Date(t.dataset.birthday),o=Date.now(),a=Math.trunc((o-n)/S);t.dataset.hoverInfo=e==="en"?`${a} years old`:`${b(a.toString())} ساله هستم`}}function b(e){return e.replace(/\d/g,t=>"۰۱۲۳۴۵۶۷۸۹"[t])}

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();let l;const d={current:null},m={current:null},q=365*24*60*60*1e3;document.addEventListener("DOMContentLoaded",()=>{z();const e=Z();N(),Q(),ne(),G(),Y(),h(e),K(),ae(),y(e)});function z(){E("./assets/background-dark.png").then(n=>{d.current=URL.createObjectURL(n),document.documentElement.classList.contains("dark")&&(document.body.style.background=`url(${d.current})`)}),E("./assets/background-light.png").then(n=>{m.current=URL.createObjectURL(n),document.documentElement.classList.contains("dark")||(document.body.style.background=`url(${m.current})`)});const e=j(),t=e?e==="dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;_(t),document.documentElement.addEventListener("transitionend",()=>{document.documentElement.classList.add("color__transition")},{once:!0}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n=>{_(n.matches)})}function W(e){e&&d.current?document.body.style.background=`url(${d.current})`:!e&&m.current&&(document.body.style.background=`url(${m.current})`)}async function E(e){return(await fetch(e)).blob()}function j(){return localStorage.getItem("colorScheme")}function B(e){localStorage.setItem("colorScheme",e)}function _(e){e?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark")):e||(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light")),B(e?"dark":"light"),W(e)}function N(e){document.fonts.onloadingdone=()=>{y(document.documentElement.lang),k()}}function h(e){for(const t of document.querySelectorAll(".career__timeline"))J(t,e)}function J(e,t){const n=e.closest(".career__section").querySelector(t==="en"?".career__info__english":".career__info__farsi"),o=e.querySelector(".timeline__end"),r=e.querySelector(".timeline__begin"),a=parseFloat(window.getComputedStyle(n).height),s=e.firstElementChild;s.classList.contains("career__timeline__line__animate")||r.addEventListener("transitionend",()=>{s.classList.add("career__timeline__line__animate")},{once:!0}),s.style.height=`${a}px`,r.style.transform=`translateY(${a-o.clientHeight-r.clientHeight}px)`}function Y(){document.querySelectorAll("img").forEach(e=>{e.complete?e.closest("div")?.classList.remove("loading"):e.onload=()=>{e.closest("div")?.classList.remove("loading")}})}function G(){const e=Array.from(document.querySelectorAll("[data-svg-url]")).reduce((t,n)=>{const o=n.dataset.svgUrl;if(o===void 0)throw console.error(`element: ${n}`),new Error("Url of the element not found");return t[o]===void 0?t[o]=[n]:t[o].push(n),t},{});for(const t in e)V(t).then(n=>{e[t].forEach(o=>{o.append(n.cloneNode(!0)),o.classList.remove("loading")})})}async function V(e){const n=await(await fetch(e)).blob(),o=new FileReader;return new Promise(r=>{o.onload=()=>{const s=o.result.split(",")[1],c=atob(s),f=new DOMParser().parseFromString(c,"image/svg+xml").documentElement;r(f)},o.readAsDataURL(n)})}function K(){window.addEventListener("resize",()=>{l?clearTimeout(l):oe(),y(document.documentElement.lang),l=setTimeout(()=>{k(),l=void 0},300)})}function Q(){const e=document.querySelector("#languageCheckbox"),t=document.querySelector("#lightModeCheckbox");e.addEventListener("change",n=>{const o=n.target.checked;b(o?"en":"fa"),g()}),t.addEventListener("change",n=>{const o=!n.target.checked;_(o),g()}),e.checked=document.documentElement.lang==="en",e.ariaLabel="Language toggle",t.checked=document.documentElement.classList.contains("light"),t.ariaLabel="Color scheme toggle",g()}function g(){const e=document.querySelector("#languageCheckbox"),t=document.querySelector("#lightModeCheckbox");e.ariaPressed=document.documentElement.lang==="en"?"English":"Persian",t.ariaPressed=document.documentElement.classList.contains("light")?"Light mode":"Dark mode"}function Z(){const e=ee();e&&(document.documentElement.lang=e);const t=document.documentElement.lang;return D(t),x(t),M(t),A(t),T(t),v(t),$(t),t}function ee(){return localStorage.getItem("language")}function te(e){localStorage.setItem("language",e)}function b(e){D(e),x(e),M(e),A(e),T(e),v(e),$(e),h(e),te(e)}function v(e){for(const t of document.querySelectorAll(".career__timeline[data-hover-info]")){const{startDate:n,endDate:o}=t.closest(".career__section").dataset,r=new Date(n),s=((new Date(o).getTime()-r.getTime())/q).toFixed(1),[c,i]=(e==="en"?s:H(s)).split(".");t.dataset.hoverInfo=e==="en"?` ${c} ${c==="1"?"year":"years"} and ${i} ${i==="1"?"month":"months"}`:`${c} سال و ${i} ماه`}}function D(e){const t=document.querySelector("#info-farsi"),n=document.querySelector("#info-english"),o=document.querySelector("main");e==="en"?(t.style.transform="translateX(100%)",t.style.opacity=0,o.style.transform=`translateX(${t.offsetWidth}px)`,n.style.transform="translateX(0)",n.style.opacity=1):e==="fa"&&(t.style.transform="translateX(0)",t.style.opacity=1,o.style.transform="translateX(0)",n.style.transform="translateX(-100%)",n.style.opacity=0),document.documentElement.lang=e}function x(e){for(const t of document.querySelectorAll(".career__section")){const n=t.querySelector(".career__info__farsi"),o=t.querySelector(".career__info__english"),r=t.querySelector(".career__timeline");o.style.width=n.offsetWidth+"px",e==="en"?(n.style.transform=`translateX(${n.offsetWidth}px)`,n.style.opacity=0,o.style.opacity=1,r.style.transform=`translateX(${n.offsetWidth}px)`,o.style.transform=`translateX(${o.offsetWidth+16}px)`):e==="fa"&&(n.style.transform="translateX(0)",n.style.opacity=1,o.style.opacity=0,r.style.transform="translateX(0)",o.style.transform="translateX(0)")}}function w(e){const t=document.querySelector("main"),n=t.querySelector(e==="en"?".main__header__english":".main__header__persian"),o=window.getComputedStyle(n),r=n.offsetHeight+parseFloat(o.marginTop),a=parseFloat(o.marginBottom),s=t.querySelector(".career__section"),c=window.getComputedStyle(s),i=Math.max(a,parseFloat(c.marginTop)),u=Array.from(document.querySelectorAll(".career__section")),f=u.reduce((X,F,R)=>{const p=F.querySelector(e==="en"?".career__info__english":".career__info__farsi"),U=window.getComputedStyle(p),O=p.offsetHeight,S=u.at(R+1);let L=0;if(S!==void 0){const P=window.getComputedStyle(S);L=Math.max(parseFloat(U.marginBottom),parseFloat(P.marginTop))}return X+O+L},0),I=parseFloat(window.getComputedStyle(document.querySelector(".page__controls")).height);return r+i+f+I+40}function ne(){for(const e of document.querySelectorAll("[data-start-date]")){const{englishEndDate:t,englishStartDate:n,persianEndDate:o,persianStartDate:r}=C(e.dataset);for(const a of e.querySelectorAll("[data-start-date-persian]"))a.append(r);for(const a of e.querySelectorAll("[data-end-date-persian]"))a.append(o);for(const a of e.querySelectorAll("[data-start-date-english]"))a.append(n);for(const a of e.querySelectorAll("[data-end-date-english]"))a.append(t)}}function A(e){for(const t of document.querySelectorAll("[data-start-date]")){const{startDate:n,endDate:o}=t.dataset,{englishEndDate:r,englishStartDate:a,persianEndDate:s,persianStartDate:c}=C(t.dataset);for(const i of t.querySelectorAll("[data-start-date-timeline]"))i.innerText=e==="en"?a:c;for(const i of t.querySelectorAll("[data-end-date-timeline]"))i.innerText=e==="en"?r:s}}function C(e){const{startDate:t,endDate:n}=e,o=new Date(t).toLocaleDateString("fa-IR",{year:"numeric",month:"long"}).split(" ").reverse().join(" "),r=new Date(n).toLocaleDateString("fa-IR",{year:"numeric",month:"long"}).split(" ").reverse().join(" "),a=new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long"}),s=new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long"});return{englishStartDate:a,englishEndDate:s,persianStartDate:o,persianEndDate:r}}function M(e){const t=document.querySelector(".main__header__english"),n=document.querySelector(".main__header__persian"),o=n.firstElementChild.offsetWidth;e==="en"?(t.style.transform="translateX(16px)",n.style.transform=`translateX(${o+16}px)`,t.style.opacity=1,n.style.opacity=0):(t.style.transform=`translateX(-${t.offsetWidth}px)`,n.style.transform="translateX(0)",t.style.opacity=0,n.style.opacity=1)}function k(){document.querySelector(".main__wrapper").classList.add("main__wrapper__transition");for(const e of document.querySelectorAll(".personal__wrapper"))e.classList.add("personal__wrapper__transition");for(const e of document.querySelectorAll(".career__section")){const t=e.querySelector(".career__info__farsi"),n=e.querySelector(".career__info__english");t.classList.add("career__info__transition"),n.classList.add("career__info__transition")}for(const e of document.querySelectorAll(".main__header__persian, .main__header__english"))e.classList.add("main__header__transition");for(const e of document.querySelectorAll(".career__timeline"))e.classList.add("timeline__language__transition");for(const e of document.querySelectorAll(".timeline__begin"))e.classList.add("timeline__begin__animation");for(const e of document.querySelectorAll(".page__controls"))e.classList.add("page__control__transition")}function oe(){for(const e of document.querySelectorAll(".personal__wrapper__transition, .career__info__transition, .main__header__transition, .main__wrapper__transition, .timeline__language__transition, .timeline__begin__animation, .page__control__transition"))e.classList.remove("personal__wrapper__transition","career__info__transition","main__header__transition","main__wrapper__transition","timeline__language__transition","timeline__begin__animation","page__control__transition")}function y(e){const t=document.querySelector("#info-farsi"),n=document.querySelector("#info-english");n.style.width=`${t.offsetWidth}px`,h(document.documentElement.lang);const o=re(),r=document.querySelector("main");r.style.minHeight=o+"px",b(e)}function re(){const e=w("en"),t=w("fa");return Math.max(e,t)}function T(e){e==="fa"?document.title="محسن افشاری":document.title="Mohsen Afshari"}function ae(){const e=document.querySelector(".page__item__info");e.hidden=!0,document.addEventListener("mousemove",t=>{t.clientX,t.clientY,e.style.top=t.clientY+20+"px",e.style.left=t.clientX+10+"px"});for(const t of document.querySelectorAll("[data-hover-info]"))t.addEventListener("mouseenter",n=>{const o=t.dataset.hoverInfo;e.hidden=!1,e.innerText=o}),t.addEventListener("mouseleave",n=>{e.hidden=!0})}function $(e){for(const t of document.querySelectorAll("[data-birthday]")){const n=new Date(t.dataset.birthday),o=Date.now(),r=Math.trunc((o-n)/q);t.dataset.hoverInfo=e==="en"?`${r} years old`:`${H(r.toString())} ساله هستم`}}function H(e){return e.replace(/\d/g,t=>"۰۱۲۳۴۵۶۷۸۹"[t])}
